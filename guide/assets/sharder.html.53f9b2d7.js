import{r as n,o as s,c as a,a as t,b as e,w as o,F as c,d as p,f as l}from"./app.9b0869d0.js";const u={},i=t("h1",{id:"sharding-your-bot",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#sharding-your-bot","aria-hidden":"true"},"#"),p(" Sharding your bot")],-1),r=p("If you don't know what sharding is, look first at "),k={href:"https://discordjs.guide/sharding/#when-to-shard",target:"_blank",rel:"noopener noreferrer"},d=p("discord.js guide"),b=t("br",null,null,-1),m=p(" If you're using sharding from discord.js, you don't even need to look here. We're going to show you how to use sharding, for example, in a sharder "),g={href:"https://www.npmjs.com/package/kurasuta",target:"_blank",rel:"noopener noreferrer"},h=p("kurasuta"),f=p(" that also supports clusters."),w=l('<p>We will create the files <code>index.js</code>, <code>launch.js</code> and folder <code>src/</code>.</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>├── node_modules\n    └── ...\n├── package.json\n├── index.js\n├── launch.js\n└── src\n    └── commands\n        └── name.js\n    └── index.js\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>In <code>index.js</code> we create a sharding manager. Don&#39;t forget to set token, shardCount, clusterCount</p>',3),j=t("div",{class:"language-javascript ext-js line-numbers-mode"},[t("pre",{class:"language-javascript"},[t("code",null,[t("span",{class:"token function"},"require"),t("span",{class:"token punctuation"},"("),t("span",{class:"token string"},"'dotenv'"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"config"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),p("\n"),t("span",{class:"token keyword"},"const"),p(),t("span",{class:"token punctuation"},"{"),p(" ShardingManager "),t("span",{class:"token punctuation"},"}"),p(),t("span",{class:"token operator"},"="),p(),t("span",{class:"token function"},"require"),t("span",{class:"token punctuation"},"("),t("span",{class:"token string"},"'kurasuta'"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),p("\n"),t("span",{class:"token keyword"},"const"),p(),t("span",{class:"token punctuation"},"{"),p(" Logger "),t("span",{class:"token punctuation"},"}"),p(),t("span",{class:"token operator"},"="),p(),t("span",{class:"token function"},"require"),t("span",{class:"token punctuation"},"("),t("span",{class:"token string"},"'gcommands'"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),p("\n"),t("span",{class:"token keyword"},"const"),p(" bot "),t("span",{class:"token operator"},"="),p(),t("span",{class:"token function"},"require"),t("span",{class:"token punctuation"},"("),t("span",{class:"token string"},"'./src/index.js'"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),p("\n"),t("span",{class:"token keyword"},"const"),p(),t("span",{class:"token punctuation"},"{"),p(" join "),t("span",{class:"token punctuation"},"}"),p(),t("span",{class:"token operator"},"="),p(),t("span",{class:"token function"},"require"),t("span",{class:"token punctuation"},"("),t("span",{class:"token string"},"'path'"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),p("\n\n"),t("span",{class:"token keyword"},"const"),p(" sharder "),t("span",{class:"token operator"},"="),p(),t("span",{class:"token keyword"},"new"),p(),t("span",{class:"token class-name"},"ShardingManager"),t("span",{class:"token punctuation"},"("),t("span",{class:"token function"},"join"),t("span",{class:"token punctuation"},"("),p("__dirname"),t("span",{class:"token punctuation"},","),p(),t("span",{class:"token string"},"'launch'"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},","),p(),t("span",{class:"token punctuation"},"{"),p("\n  client"),t("span",{class:"token operator"},":"),p(" bot"),t("span",{class:"token punctuation"},","),p("\n  token"),t("span",{class:"token operator"},":"),p(" process"),t("span",{class:"token punctuation"},"."),p("env"),t("span",{class:"token punctuation"},"."),t("span",{class:"token constant"},"TOKEN"),t("span",{class:"token punctuation"},","),p("\n  shardCount"),t("span",{class:"token operator"},":"),p(),t("span",{class:"token string"},"'SHARD COUNT for example 2'"),t("span",{class:"token punctuation"},","),p("\n  clusterCount"),t("span",{class:"token operator"},":"),p(),t("span",{class:"token string"},"'CLUSTER COUNT for example 1'"),p("\n"),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},")"),p("\n\nsharder"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"on"),t("span",{class:"token punctuation"},"("),t("span",{class:"token string"},"'shardReady'"),t("span",{class:"token punctuation"},","),p(),t("span",{class:"token parameter"},"id"),p(),t("span",{class:"token operator"},"=>"),p(),t("span",{class:"token punctuation"},"{"),p("\n  Logger"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"info"),t("span",{class:"token punctuation"},"("),t("span",{class:"token template-string"},[t("span",{class:"token template-punctuation string"},"`"),t("span",{class:"token string"},"Kurasuta: Shard "),t("span",{class:"token interpolation"},[t("span",{class:"token interpolation-punctuation punctuation"},"${"),p("id"),t("span",{class:"token interpolation-punctuation punctuation"},"}")]),t("span",{class:"token string"}," is ready"),t("span",{class:"token template-punctuation string"},"`")]),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),p("\n"),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},")"),p("\n\nsharder"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"spawn"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),p("\n")])]),t("div",{class:"line-numbers"},[t("span",{class:"line-number"},"1"),t("br"),t("span",{class:"line-number"},"2"),t("br"),t("span",{class:"line-number"},"3"),t("br"),t("span",{class:"line-number"},"4"),t("br"),t("span",{class:"line-number"},"5"),t("br"),t("span",{class:"line-number"},"6"),t("br"),t("span",{class:"line-number"},"7"),t("br"),t("span",{class:"line-number"},"8"),t("br"),t("span",{class:"line-number"},"9"),t("br"),t("span",{class:"line-number"},"10"),t("br"),t("span",{class:"line-number"},"11"),t("br"),t("span",{class:"line-number"},"12"),t("br"),t("span",{class:"line-number"},"13"),t("br"),t("span",{class:"line-number"},"14"),t("br"),t("span",{class:"line-number"},"15"),t("br"),t("span",{class:"line-number"},"16"),t("br"),t("span",{class:"line-number"},"17"),t("br"),t("span",{class:"line-number"},"18"),t("br")])],-1),x=t("div",{class:"language-text ext-text line-numbers-mode"},[t("pre",{class:"language-text"},[t("code",null,"TOKEN=your discord bot token from discord.dev\n")]),t("div",{class:"line-numbers"},[t("span",{class:"line-number"},"1"),t("br")])],-1),y=t("p",null,[p("Once we have "),t("code",null,"index.js"),p(" done, we move to "),t("code",null,"launch.js"),p(" where the cluster will be created.")],-1),v=t("div",{class:"language-javascript ext-js line-numbers-mode"},[t("pre",{class:"language-javascript"},[t("code",null,[t("span",{class:"token keyword"},"const"),p(),t("span",{class:"token punctuation"},"{"),p(" BaseCluster "),t("span",{class:"token punctuation"},"}"),p(),t("span",{class:"token operator"},"="),p(),t("span",{class:"token function"},"require"),t("span",{class:"token punctuation"},"("),t("span",{class:"token string"},"'kurasuta'"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),p("\n"),t("span",{class:"token keyword"},"const"),p(),t("span",{class:"token punctuation"},"{"),p(" Logger "),t("span",{class:"token punctuation"},"}"),p(),t("span",{class:"token operator"},"="),p(),t("span",{class:"token function"},"require"),t("span",{class:"token punctuation"},"("),t("span",{class:"token string"},"'gcommands'"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),p("\n\nmodule"),t("span",{class:"token punctuation"},"."),p("exports "),t("span",{class:"token operator"},"="),p(),t("span",{class:"token keyword"},"class"),p(),t("span",{class:"token class-name"},"extends"),p(" BaseCluster"),t("span",{class:"token punctuation"},"{"),p("\n  "),t("span",{class:"token function"},"launch"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},")"),p(),t("span",{class:"token punctuation"},"{"),p("\n    Logger"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"info"),t("span",{class:"token punctuation"},"("),t("span",{class:"token template-string"},[t("span",{class:"token template-punctuation string"},"`"),t("span",{class:"token string"},"Kurasuta: Launching cluster "),t("span",{class:"token interpolation"},[t("span",{class:"token interpolation-punctuation punctuation"},"${"),t("span",{class:"token keyword"},"this"),t("span",{class:"token punctuation"},"."),p("id"),t("span",{class:"token interpolation-punctuation punctuation"},"}")]),t("span",{class:"token template-punctuation string"},"`")]),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),p("\n    "),t("span",{class:"token keyword"},"this"),t("span",{class:"token punctuation"},"."),p("client"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"login"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),p("\n  "),t("span",{class:"token punctuation"},"}"),p("\n"),t("span",{class:"token punctuation"},"}"),p("\n")])]),t("div",{class:"line-numbers"},[t("span",{class:"line-number"},"1"),t("br"),t("span",{class:"line-number"},"2"),t("br"),t("span",{class:"line-number"},"3"),t("br"),t("span",{class:"line-number"},"4"),t("br"),t("span",{class:"line-number"},"5"),t("br"),t("span",{class:"line-number"},"6"),t("br"),t("span",{class:"line-number"},"7"),t("br"),t("span",{class:"line-number"},"8"),t("br"),t("span",{class:"line-number"},"9"),t("br")])],-1),C=t("p",null,[p("We already have "),t("code",null,"launch.js"),p(", so that leaves us with the last one, and that's GClient in "),t("code",null,"src/index.js"),p(".")],-1),_=t("div",{class:"language-javascript ext-js line-numbers-mode"},[t("pre",{class:"language-javascript"},[t("code",null,[t("span",{class:"token function"},"require"),t("span",{class:"token punctuation"},"("),t("span",{class:"token string"},"'dotenv'"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"config"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),p("\n"),t("span",{class:"token keyword"},"const"),p(),t("span",{class:"token punctuation"},"{"),p(" GClient"),t("span",{class:"token punctuation"},","),p(" Logger "),t("span",{class:"token punctuation"},"}"),p(),t("span",{class:"token operator"},"="),p(),t("span",{class:"token function"},"require"),t("span",{class:"token punctuation"},"("),t("span",{class:"token string"},"'gcommands'"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),p("\n"),t("span",{class:"token keyword"},"const"),p(),t("span",{class:"token punctuation"},"{"),p(" join "),t("span",{class:"token punctuation"},"}"),p(),t("span",{class:"token operator"},"="),p(),t("span",{class:"token function"},"require"),t("span",{class:"token punctuation"},"("),t("span",{class:"token string"},"'path'"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),p("\n\n"),t("span",{class:"token keyword"},"class"),p(),t("span",{class:"token class-name"},"YourBot"),p(),t("span",{class:"token keyword"},"extends"),p(),t("span",{class:"token class-name"},"GClient"),t("span",{class:"token punctuation"},"{"),p("\n  "),t("span",{class:"token function"},"constructor"),t("span",{class:"token punctuation"},"("),t("span",{class:"token parameter"},"options"),t("span",{class:"token punctuation"},")"),p(),t("span",{class:"token punctuation"},"{"),p("\n    "),t("span",{class:"token keyword"},"super"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},"{"),p("\n      dirs"),t("span",{class:"token operator"},":"),p(),t("span",{class:"token punctuation"},"["),p("\n        "),t("span",{class:"token function"},"join"),t("span",{class:"token punctuation"},"("),p("__dirname"),t("span",{class:"token punctuation"},","),p(),t("span",{class:"token string"},"'commands'"),t("span",{class:"token punctuation"},")"),p("\n      "),t("span",{class:"token punctuation"},"]"),t("span",{class:"token punctuation"},","),p("\n      intents"),t("span",{class:"token operator"},":"),p(),t("span",{class:"token punctuation"},"["),p(),t("span",{class:"token string"},"'GUILDS'"),p(),t("span",{class:"token punctuation"},"]"),t("span",{class:"token punctuation"},","),p("\n      shards"),t("span",{class:"token operator"},":"),p(" options"),t("span",{class:"token punctuation"},"."),p("shards"),t("span",{class:"token punctuation"},","),p("\n      shardCount"),t("span",{class:"token operator"},":"),p(" options"),t("span",{class:"token punctuation"},"."),p("shardCount\n    "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},")"),p("\n  "),t("span",{class:"token punctuation"},"}"),p("\n\n  "),t("span",{class:"token function"},"login"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},"{"),p("\n    Logger"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"info"),t("span",{class:"token punctuation"},"("),t("span",{class:"token template-string"},[t("span",{class:"token template-punctuation string"},"`"),t("span",{class:"token string"},"Discord: Attempting to login on shards ["),t("span",{class:"token interpolation"},[t("span",{class:"token interpolation-punctuation punctuation"},"${"),t("span",{class:"token keyword"},"this"),t("span",{class:"token punctuation"},"."),p("options"),t("span",{class:"token punctuation"},"."),p("shards"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"join"),t("span",{class:"token punctuation"},"("),t("span",{class:"token string"},"', '"),t("span",{class:"token punctuation"},")"),t("span",{class:"token interpolation-punctuation punctuation"},"}")]),t("span",{class:"token string"},"]."),t("span",{class:"token template-punctuation string"},"`")]),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),p("\n    "),t("span",{class:"token keyword"},"super"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"login"),t("span",{class:"token punctuation"},"("),p("process"),t("span",{class:"token punctuation"},"."),p("env"),t("span",{class:"token punctuation"},"."),t("span",{class:"token constant"},"TOKEN"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),p("\n  "),t("span",{class:"token punctuation"},"}"),p("\n"),t("span",{class:"token punctuation"},"}"),p("\n\nmodule"),t("span",{class:"token punctuation"},"."),p("exports "),t("span",{class:"token operator"},"="),p(" YourBot"),t("span",{class:"token punctuation"},";"),p("\n")])]),t("div",{class:"line-numbers"},[t("span",{class:"line-number"},"1"),t("br"),t("span",{class:"line-number"},"2"),t("br"),t("span",{class:"line-number"},"3"),t("br"),t("span",{class:"line-number"},"4"),t("br"),t("span",{class:"line-number"},"5"),t("br"),t("span",{class:"line-number"},"6"),t("br"),t("span",{class:"line-number"},"7"),t("br"),t("span",{class:"line-number"},"8"),t("br"),t("span",{class:"line-number"},"9"),t("br"),t("span",{class:"line-number"},"10"),t("br"),t("span",{class:"line-number"},"11"),t("br"),t("span",{class:"line-number"},"12"),t("br"),t("span",{class:"line-number"},"13"),t("br"),t("span",{class:"line-number"},"14"),t("br"),t("span",{class:"line-number"},"15"),t("br"),t("span",{class:"line-number"},"16"),t("br"),t("span",{class:"line-number"},"17"),t("br"),t("span",{class:"line-number"},"18"),t("br"),t("span",{class:"line-number"},"19"),t("br"),t("span",{class:"line-number"},"20"),t("br"),t("span",{class:"line-number"},"21"),t("br"),t("span",{class:"line-number"},"22"),t("br"),t("span",{class:"line-number"},"23"),t("br")])],-1),L=p("Done, now you just need to follow the "),q=p("basic guide"),O=p("."),S=t("br",null,null,-1),G=p(" You can start the bot in the main folder, not in "),T=t("code",null,"src",-1),D=p(" using the "),I=t("code",null,"node index.js",-1),K=p(" command");u.render=function(p,l){const u=n("OutboundLink"),N=n("CodeGroupItem"),B=n("CodeGroup"),E=n("RouterLink");return s(),a(c,null,[i,t("p",null,[r,t("a",k,[d,e(u)]),b,m,t("a",g,[h,e(u)]),f]),w,e(B,null,{default:o((()=>[e(N,{title:"index.js"},{default:o((()=>[j])),_:1}),e(N,{title:".env"},{default:o((()=>[x])),_:1})])),_:1}),y,e(B,null,{default:o((()=>[e(N,{title:"launch.js"},{default:o((()=>[v])),_:1})])),_:1}),C,e(B,null,{default:o((()=>[e(N,{title:"src/index.js"},{default:o((()=>[_])),_:1})])),_:1}),t("p",null,[L,e(E,{to:"/commands/first-command.html"},{default:o((()=>[q])),_:1}),O,S,G,T,D,I,K])],64)};export{u as default};
